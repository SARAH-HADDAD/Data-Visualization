<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Sorting Algorithm Visualization</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <style>
      .bar {
        fill: rgb(180, 70, 160);
      }
      .dot:hover {
        fill:rgb(159, 13, 37);
      }

      .label {
        font-family: sans-serif;
        font-size: 12px;
        text-anchor: middle;
      }
    </style>
  </head>
  <body>
    <div id="histogram"></div>

    <script type="module">
      //values taena
      let data = [22, 55, 33, 44, 77, 110, 66];

      // graph dimensions
      const width = 800;
      const height = 400;
      const margin = { top: 20, right: 20, bottom: 30, left: 40 };

      // Create SVG container
      const svg = d3
        .select("#histogram")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

      // Set up the initial bar chart
      const barWidth = 30;
      const barPadding = 5;
      const yDomainMin = d3.min(data, (d) => d);
      const yDomainMax = d3.max(data, (d) => d);

      const yScale = d3
        .scaleLinear()
        .domain([yDomainMin - 10, yDomainMax + 10])
        .range([height - margin.top, margin.top]);

      const xScale = d3
        .scaleBand()
        .domain(data.map((d, i) => i))
        .range([margin.left, width - margin.right])
        .padding(0.1);

      svg
        .selectAll("rect")
        .data(data)
        .enter()
        .append("rect")
        .attr("class", "bar")
        .attr("x", (d, i) => xScale(i))
        .attr("y", (d) => yScale(d))
        .attr("width", xScale.bandwidth())
        .attr("height", (d) => height - yScale(d) - margin.top);

      // Add text labels below each bar
      svg
        .selectAll("text")
        .data(data)
        .enter()
        .append("text")
        .attr("class", "label")
        .attr("x", (d, i) => xScale(i) + xScale.bandwidth() / 2)
        .attr("y", (d) => yScale(d) + 20)
        .text((d) => d);

      // Function to update the bar chart with new data
      function update(newData) {
        const bars = svg.selectAll("rect").data(newData);
        const labels = svg.selectAll("text").data(newData);

        // Update existing bars
        bars
          .transition()
          .duration(500)
          .attr("y", (d) => yScale(d))
          .attr("height", (d) => height - yScale(d) - margin.top);

        // Update text labels
        labels
          .transition()
          .duration(500)
          .attr("x", (d, i) => xScale(i) + xScale.bandwidth() / 2)
          .attr("y", (d) => yScale(d) + 20)
          .text((d) => d);
      
      }

      function bubbleSort(arr) {
        let i = 0;
        let j = 0;
        const len = arr.length;
        const timer = setInterval(function () {
          if (i < len) {
            if (j < len - i - 1) {
              if (arr[j] > arr[j + 1]) {
                const temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
                update(arr);
              }
              j++;
            } else {
              i++;
              j = 0;
            }
          } else {
            clearInterval(timer);
          }
        }, 500);
      }

      // Function to start the sorting animation
      bubbleSort(data);
    </script>
  </body>
</html>
